"use strict";var PageJobSummary=function(n){var t=this,u=n.url,i=n.model||{},e;i.search=null;i.jobSummaryResultList=[];var f=new SimplePagination(".pagination-job-summary-list"),o=$(".content-job-summary"),r=o.find(".list-job-summary-result"),s=$.templates("#template-job-summary-simple"),h=$.templates("#template-job-summary-simple-empty"),c=(new Date).getTimezoneOffset()/-60;t.setData=function(n){i=n.model||{};u=n.url;var r=window.location.href,t=r.split("/");i.id=parseInt(t[t.length-2])||0};f.onPageChanged=function(n){t.searchJobSummary(t.setJobSummaryResultList,n)};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.searchJobSummary=function(n,t){var r={},f=10,s=t?t*f:0,e={filter:r.keyword,offset:s,recordSize:f,sorting:null,advancedFilter:r},o;i.search=e;o={url:u.searchJobSummary,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};$.ajax(o).done(n)};t.setJobSummaryResultList=function(n){if(n&&n.status&&n.status.code===1)if(n.data.data.length>0){r.empty();f.set(n.data);$.each(n.data.data,function(n,t){t.viewJobCandidateFullProfileSubscriptionEndDate=moment(t.viewJobCandidateFullProfileSubscriptionEndDate,"YYYY-MM-DD").add(c,"hour").format("DD MMM YYYY")});i.search.offset===0&&t.clearJobSummaryResultList();var u=s.render(n.data.data);r.append(u);i.jobSummaryResultList=i.jobSummaryResultList.concat(n.data.data)}else r.append(h);else swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.clearJobSummaryResultList=function(){r.empty();i.jobSummaryResultList=[]};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.setUserEvent=function(){r.on("click",".btn-renew",function(){i.selectedJobApplicationId=$(this).closest(".card-job-summary-simple").data("entity-id")});r.on("click",".card-job-summary-simple",function(n){var i=$(n.target).hasClass("btn-renew"),r=$(this).hasClass("cursor-not-allowed"),t;i===!1&&r===!1&&(t=$(this).data("href"),window.location.href=t)})};t.getModel=function(){return i};e=function(){t.setData(n);t.setUserEvent();t.searchJobSummary(t.setJobSummaryResultList)};e()},pageJobSummary=new PageJobSummary({url:{searchJobSummary:"/api/pro/job/summary"}});