"use strict";var PageConsultationInvited=function(n){var t=this,s=".content-consultation-candidates",u=n.url,h=(new Date).getTimezoneOffset()/-60,r=new SimplePagination,i,f,e,o;r.onPageChanged=function(n){t.getConsultationInvitationList(t.setConsultationInvitationList,n)};i=n.model||{consultationProfile:{},invitedCandidates:{totalCount:0,data:[],selected:!1},pagination:r,setCandidateResult:function(n){return r.set(n),n&&n.data&&$.each(n.data,function(n,t){t.createdOnText=moment(t.createdOnUTC,"YYYY-MM-DDTHH:mm").add(h,"hour").format("DD MMM YYYY");t.declineReasons=t.declineReasons&&t.declineReasons.replace(/\n/g,"<br/>")}),$.observable(this.invitedCandidates).setProperty(n),!1}};Object.defineProperty(t,"model",{get:function(){return i}});$.templates({tmplConsultationJobInvited:"#tmpl-consultation-job-invited"});f=function(){};t.getConsultationInvitationList=function(n,t){var i=10,r=t?t*i:0,f={offset:r,recordSize:i,filter:{keyword:""}.keyword,advancedFilter:{consultationInvitationStatuses:[1,3,8]}},e={url:u.getConsultationInvitationList,method:"post",headers:{"Content-Type":"application/json"},data:JSON.stringify(f)};$.ajax(e).done(n)};t.updateOrganizationConsultationInvitationRead=function(n,t){if(n.isOrganizationRead)return!0;n.isOrganizationRead=!0;var i={url:u.updateOrganizationConsultationInvitationRead.format(n),method:"PUT",headers:{"Content-Type":"application/json"},background:!0};$.ajax(i).done(t)};t.setConsultationInvitationList=function(n){t.handleResponse(n,function(n){i.setCandidateResult(n.data)})};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};e=function(){};o=function(){e();f();$.templates.tmplConsultationJobInvited.link(s,i);t.getConsultationInvitationList(t.setConsultationInvitationList)};o()},pageConsultationInvited=new PageConsultationInvited({url:{getConsultationInvitationList:"/api/pro/consultationinvitation/organization/list",inviteConsultationCondidates:"/api/pro/consultation/{{id}}/invite",getConsultantPastJob:"/api/pro/service/{{id}}/consultation/reviewed",updateOrganizationConsultationInvitationRead:"/api/pro/consultationinvitation/{{id}}/org/read"}});