"use strict";var PageTerminate=function(n){var t=this,f=n.url,r={},i,e,u;t.getParentPage=function(){var n=null;return typeof pageJobApplicant!="undefined"&&(n=pageJobApplicant),n};$.templates({tmplTerminate:"#tmpl-terminate"});i=$(".content-terminate");e=i.find("#form-job-terminate");t.loadModel=function(){var n=pageJobApplicant&&pageJobApplicant.getModel();r.jobApplicationId=n&&n.selectedJobEngagement.id;r.jobProfileId=n&&n.selectedJobEngagement.jobProfileId;r.jobType=n&&n.selectedJobEngagement.jobType};t.setJobApplicationEndDate=function(n){var r=app.getFormValue(i),u=t.getParentPage(),e={url:f.setJobApplicationTerminate.format({id:u.model.selectedJobEngagement.id}),method:"PUT",headers:{"Content-Type":"application/json"},data:JSON.stringify(r)};$.ajax(e).done(n)};t.onJobApplicationEndDateUpdated=function(n){t.handleResponse(n,function(){var n=t.getParentPage();n.reloadSelectedEngagement();i.closest(".modal").modal("hide")})};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.setUserEvent=function(){i.find(".btn-hire").on("click",function(n){n.preventDefault();n.stopPropagation();i.find("form").valid()&&t.setJobApplicationEndDate(t.onJobApplicationEndDateUpdated)});i.find(".btn-cancel").on("click",function(){i.closest(".modal").modal("hide")})};u=function(){t.loadModel();$.templates.tmplTerminate.link(i,{});r.jobType===3&&($('[name="endMilestoneId"]').data("sourceurl",$('[name="endMilestoneId"]').data("sourceurl").replace("jobApplicationId",r.jobApplicationId)),$(".section-end-milestone").removeClass("hidden"),$(".section-end-date").addClass("hidden"));app.initFormComponent(i);t.setUserEvent()};u()},pageTerminate=new PageTerminate({url:{setJobApplicationTerminate:"/api/pro/jobapplication/{{id}}/terminate"}});