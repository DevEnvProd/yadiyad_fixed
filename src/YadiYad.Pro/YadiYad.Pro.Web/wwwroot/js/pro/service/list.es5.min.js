"use strict";var PageServiceList=function(n){var i=this,u=n.url,r=n.model||{},s;r.serviceList=[];var e=new SimplePagination(".pagination-service-list"),h=$.templates("#template-card-service-empty"),c=$.templates("#template-card-service-list"),l=$.templates("#template-card-service-list-empty"),o=$.templates("#template-card-service-list-response"),a=$.templates("#template-card-service-list-response-empty"),t=$(".content-service-search"),f=t.find(".list-service-list"),v=$(".content-service-list-response"),y=(new Date).getTimezoneOffset()/-60;e.onPageChanged=function(n){console.log(n);i.loadServiceListData(i.setServiceList,n)};i.loadServiceListData=function(n,t){var i={keyword:""},f=10,s=t?t*f:0,e={filter:i.keyword,offset:s,recordSize:f,sorting:null,advancedFilter:i},o;r.search=e;o={url:u.getServiceList,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};$.ajax(o).done(n)};i.submitServiceProfile=function(n){swal({title:"Are You Sure to Delete?",icon:"warning",buttons:["No","Yes"],dangerMode:!0}).then(function(t){if(t){var i={url:u.deleteServiceProfile.format(r.selectedServiceList),method:"DELETE",headers:{"Content-Type":"application/json"}};$.ajax(i).done(n)}else swal("Failed to delete service profile!")})};i.onSubmitServiceProfileResponse=function(n){n&&n.status&&n.status.code===1?swal({icon:"success",title:"Service Profile Deleted Successfully"}).then(function(){location.reload()}):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};i.setServiceList=function(n){var v,y,p;if(n&&n.status&&n.status.code===1)if(n.data.data.length>0){f.empty();e.set(n.data);$.each(n.data.data,function(n,t){t.tenureStart!==null&&(t.tenureStart=moment(t.tenureStart,"YYYY-MM-DDTHH:mm").add(0,"hour").format("DD MMM YYYY"));t.tenureEnd!==null&&(t.tenureEnd=moment(t.tenureEnd,"YYYY-MM-DDTHH:mm").add(0,"hour").format("DD MMM YYYY"));t.updatedOn=moment(t.updatedOnUTC,"YYYY-MM-DDTHH:mm").add(0,"hour").format("DD/MM/YYYY")});t.bindText(n.data);v=c.render(n.data.data);f.append(v);r.serviceList=r.serviceList.concat(n.data.data);r.selectedServiceList=n.data.data[0];y=o.render(r.selectedServiceList);t.find(".content-service-list-response").replaceWith(y);t.find(".card-service-list").on("click",".btn-edit",function(){location.href=u.editServiceProfilePage.format(r.selectedServiceList)});t.find(".card-service-list").on("click",".btn-delete",function(){i.submitServiceProfile(i.onSubmitServiceProfileResponse)});p=$(".area-expertise");r.selectedServiceList.serviceExpertises.forEach(function(n){p.append("<span class='badge badge-pill badge-primary'>"+n.name+"<\/span>&nbsp;")});var nt=t.find(".form-group-onsite"),w=t.find(".form-group-charges"),b=t.find(".form-group-projectBased"),k=t.find(".form-group-consultation"),d=t.find(".form-group-freelancing"),g=t.find(".form-group-part-time"),s=r.selectedServiceList.serviceTypeId;w.addClass("hidden");b.addClass("hidden");k.addClass("hidden");d.addClass("hidden");g.addClass("hidden");switch(s){case 1:d.removeClass("hidden");break;case 2:g.removeClass("hidden");break;case 3:k.removeClass("hidden");break;case 4:b.removeClass("hidden")}s&&s!==4&&w.removeClass("hidden")}else t.replaceWith(h),f.append(l),t.find(".content-service-list-response").replaceWith(a);else swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};i.setServiceListResponse=function(n){var a=$(n).data("entity-id"),v=$.grep(r.serviceList,function(n){return n.id===a}),u,f;$(n).parent().children(".selected").removeClass("selected");$(n).addClass("selected");$(n).parent().find(".action-panel").removeClass("selected");$(n).find(".action-panel").addClass("selected");r.selectedServiceList=v[0];u=o.render(r.selectedServiceList);t.find(".content-service-list-response").replaceWith(u);f=$(".area-expertise");r.selectedServiceList.serviceExpertises.forEach(function(n){f.append("<span class='badge badge-pill badge-primary'>"+n.name+"<\/span>&nbsp;")});var y=t.find(".form-group-onsite"),e=t.find(".form-group-charges"),s=t.find(".form-group-projectBased"),h=t.find(".form-group-consultation"),c=t.find(".form-group-freelancing"),l=t.find(".form-group-part-time"),i=r.selectedServiceList.serviceTypeId;e.addClass("hidden");s.addClass("hidden");h.addClass("hidden");c.addClass("hidden");l.addClass("hidden");switch(i){case 1:c.removeClass("hidden");break;case 2:l.removeClass("hidden");break;case 3:h.removeClass("hidden");break;case 4:s.removeClass("hidden")}i&&i!==4&&e.removeClass("hidden")};i.setUserEvent=function(){f.on("click",".card-service-list",function(){i.setServiceListResponse(this);t.find(".card-service-list").on("click",".btn-edit",function(){location.href=u.editServiceProfilePage.format(r.selectedServiceList)});t.find(".card-service-list").on("click",".btn-delete",function(){i.submitServiceProfile(i.onSubmitServiceProfileResponse)})})};s=function(){i.loadServiceListData(i.setServiceList);i.setUserEvent()};s()},pageServiceList=new PageServiceList({url:{getServiceList:"/api/pro/service/user",editServiceProfilePage:"/pro/service/details/{{id}}",deleteServiceProfile:"/api/pro/service/{{id}}"}});