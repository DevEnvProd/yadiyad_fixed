"use strict";var PageRequestService=function(n){var t=this,o=n.url,i=n.model||{},e;i.serviceApplicationId=null;var r=$(".content-request-service"),u=r.find(".form-request-service"),s=r.find(".form-group-duration"),h=r.find(".form-group-requiredTime"),c=r.find(".form-group-location"),f=r.find(".label-requiredTime");t.loadModel=function(){var n=pageServiceSearch&&pageServiceSearch.getModel();i=n&&n.selectedServiceProfile;i.id?((i.serviceTypeId===1||i.serviceTypeId===2)&&(s.removeClass("hidden"),h.removeClass("hidden"),i.serviceTypeId===1&&f.html("hours / week"),i.serviceTypeId===2&&f.html("days / month")),(i.serviceModelId===1||i.serviceModelId===2)&&c.removeClass("hidden")):alert("service profile id not found")};t.requestService=function(n){var t=app.getFormValue(u),r;t.serviceProfileId=i.id;r={url:o.requestService,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};$.ajax(r).done(n)};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.responseRequestService=function(n){t.handleResponse(n,function(){swal({icon:"success",title:"Your Service Request is sent to the Seller"}).then(function(){location.reload()})})};t.setUserEvent=function(){u.find("button[type=submit]").on("click",function(n){(n.preventDefault(),n.stopPropagation(),u.valid()!==!1)&&t.requestService(t.responseRequestService)})};e=function(){app.initFormComponent(u);var n=pageServiceSearch.getModel().selectedServiceProfile;n.countryId=n.countryId||131;n.countryName=n.countryName||"Malaysia";app.setFormValue(u,n);n.stateProvinceId&&r.find('[name="stateProvinceId"]').prop("disabled",!0);n.cityId&&r.find('[name="cityId"]').prop("disabled",!0);t.loadModel();t.setUserEvent()};e()},pageRequestService=new PageRequestService({url:{requestService:"/api/pro/serviceApplication/request"}});