"use strict";var PagePaymentDetailsList=function(n){var t=this,o=n.url,i=n.model||{},e;i.paymentList=[];var f=new SimplePagination(".pagination-list-payment-list"),s=$.templates("#template-card-payment-list"),h=$.templates("#template-card-payment-list-empty"),c=$.templates("#template-card-payment-detail"),l=$.templates("#template-card-payment-detail-empty"),r=$(".content-payment-search"),u=r.find(".list-payment-list"),a=r.find("#form-payment-details-filter");f.onPageChanged=function(n){t.loadPaymentListData(t.setPaymentList,n)};t.loadPaymentListData=function(n,t){var r={keyword:""},u=10,s=t?t*u:0,f={filter:r.keyword,offset:s,recordSize:u,sorting:null,advancedFilter:r},e;r.orderDate=$("#inputPaymentDetailsOrderDate").val();i.search=f;e={url:o.getPaymentList,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(f)};$.ajax(e).done(n)};t.setPaymentList=function(n){if(n&&n.status&&n.status.code===1)if(n.data.data.length>0){r.bindText(n.data);var e=s.render(n.data.data);u.empty();f.set(n.data);u.append(e);i.paymentList=i.paymentList.concat(n.data.data);i.selectedPayment=n.data.data[0];t.refreshPaymentDetail(i.selectedPayment)}else u.empty(),f.set(n.data),u.append(h),r.find(".content-payment-detail").replaceWith(l);else swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.setConsultationListResponse=function(n){var r=$(n).data("entity-id"),u=$.grep(i.paymentList,function(n){return n.id===r});$(n).parent().children(".selected").removeClass("selected");$(n).addClass("selected");i.selectedPayment.invoiceDate==null&&i.selectedPayment.invoiceNumber==null&&(i.selectedPayment.invoiceDate="-",i.selectedPayment.invoiceNumber="-");i.selectedPayment=u[0];t.refreshPaymentDetail(i.selectedPayment)};t.refreshPaymentDetail=function(n){var t=c.render(n);r.find(".content-payment-detail").replaceWith(t)};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.setUserEvent=function(){u.on("click",".card-payment-list",function(){t.setConsultationListResponse(this)});$("#btnPaymentDetailsSearch").on("click",function(){t.loadPaymentListData(t.setPaymentList)})};e=function(){t.loadPaymentListData(t.setPaymentList);t.setUserEvent();app.initFormComponent(a)};e()},pagePaymentDetailsList=new PagePaymentDetailsList({url:{getPaymentList:"/api/pro/order/paymentlist"}});