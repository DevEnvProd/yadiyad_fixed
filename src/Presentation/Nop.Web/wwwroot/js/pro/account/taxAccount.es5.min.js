"use strict";var PageTaxAccountDetails=function(n){var t=this,f=n.model,e=n.url,r=$(".content-tax-account"),i=r.find("#form-tax-account"),s=r.find(".btn-cancel"),u=r.find(".tax-account-info"),o=r.find(".tax-account-edit");t.initDisplayComponent=function(){app.initFormComponent(i)};t.setDisplayProperty=function(t){t=t.data;f=n.model||{};f.id=t.customerId;var i=/{{([\d|\w]{1,})}}/g;r.find("[text]").each(function(){for(var n=$(this).attr("text"),r,f,u;(r=i.exec(n))!==null;)f=r[0],u=r[1],n=n.replace(f,t[u]===0?0:t[u]||"");$(this).text(n)})};t.getTaxAccountData=function(n){var t={url:e.getTaxAccount,method:"get",headers:{"Content-Type":"application/json"}};$.ajax(t).done(n)};t.setTaxAccountData=function(n){if(n&&n.status&&n.status.code===1&&(app.setFormValue(i,n.data),n.data&&n.data.id!==0)){var t=n.data,f=/{{([\d|\w]{1,})}}/g;(t.sstRegNo===null||t.sstRegNo==="")&&(t.sstRegNo="NOT SET");r.find("[text]").each(function(){for(var n=$(this).attr("text"),i,u,r;(i=f.exec(n))!==null;)u=i[0],r=i[1],n=n.replace(u,t[r]===0?0:t[r]||"");$(this).text(n)});u.removeClass("hidden");s.removeClass("hidden")}};t.submitTaxAccount=function(n){var t=app.getFormValue(i),r={url:i.attr("action"),method:i.attr("method"),headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};$.ajax(r).done(n)};t.validationForm=function(){return i.valid()&&!0};t.onSubmitTaxAccountResponse=function(n){n&&n.status&&n.status.code===1?swal({icon:"success",title:"Update Tax Account",text:"Saved successfully"}).then(function(){location.href=e.getTaxAccountPage}):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.setUserEvent=function(){i.find("button[type=submit]").on("click",function(n){n.preventDefault();n.stopPropagation();t.validationForm()&&t.submitTaxAccount(t.onSubmitTaxAccountResponse)});i.find(".btn-cancel").on("click",function(n){n.preventDefault();n.stopPropagation();o.addClass("hidden");u.removeClass("hidden")});r.find(".btn-edit").on("click",function(n){n.preventDefault();n.stopPropagation();u.addClass("hidden");o.removeClass("hidden")})};t.initDisplayComponent();t.getTaxAccountData(t.setTaxAccountData);t.setUserEvent()},pageTaxAccountDetails=new PageTaxAccountDetails({url:{getTaxAccount:"/api/pro/individual",getTaxAccountPage:"/pro/account/taxaccount"}});