"use strict";var PayProjectDepositRequest=function(n){var t=this,f=n.url,r={jobEngagement:null},i=$(".content-payprojectdepositrequest"),u;t.updateDepositRequest=function(n){var t=app.getFormValue(i),u;t.bankInSlipDownloadId===""||t.bankInSlipDownloadId==="0"?swal({icon:"warning",title:"Fail",text:"Please upload bank deposit slip to submit."}).then(function(){}):(u={url:f.createUpdateDepositRequest.format({id:r.jobEngagement.id}),method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)},$.ajax(u).done(n))};t.updateDepositRequestResponse=function(n){t.handleResponse(n,function(n){var t="Project Deposit Bank In has submitted for approval.",r=14;n.data.status===1&&(t="Project Deposit has been processed.");swal({icon:"success",title:t}).then(function(){n.data.status===1?window.location.href="/pro/jobapplication/hired":(pageJobApplicant.reloadSelectedEngagement(r),i.closest(".modal").modal("hide"))})})};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.initForm=function(){var t,u,f,n;typeof pageJobApplicant!="undefined"&&(t=pageJobApplicant&&pageJobApplicant.model,t!==null&&(r.jobEngagement=t&&t.selectedJobEngagement));u=r.jobEngagement;f={code:u.code,payAmount:u.payAmount};app.initFormComponent(i);i.find('[name="payAmount"]').val("RM "+f.payAmount.toFixed(2));i.bindText(f);i.find('[name="bankInSlipDownloadId"]').prop("required",!0);n=i.closest(".modal-dialog");i.is(".mode-offsetted")?(n.removeClass("modal-lg"),n.addClass("modal-md")):(n.removeClass("modal-md"),n.addClass("modal-lg"))};t.setUserEvent=function(){i.on("click",'[type="submit"]',function(n){n.preventDefault();n.stopPropagation();i.valid()&&t.updateDepositRequest(t.updateDepositRequestResponse)})};u=function(){t.initForm();t.setUserEvent()};u()},pagePayJobEscrow=new PayProjectDepositRequest({url:{createUpdateDepositRequest:"/api/pro/depositrequest/projectbasedjob/{{id}}"}});