"use strict";var PagePayConsultationFee=function(n){var t=this,r=n.url,i=n.model||{},f;i.orderId=null;var e=$.templates("#template-order"),s=$.templates("#template-payment-gateway"),u=$(".content-order"),o=$(".content-payment-gateway");t.loadOrderDetail=function(n){var t={productTypeId:31,refId:pageConsultationapplicant&&pageConsultationapplicant.model.selectedApplicant.id},i={url:r.getOrderDetail,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};$.ajax(i).done(n)};t.generatePaymentLink=function(n){var t={url:r.generatePaymentLink,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({Id:i.orderId})};$.ajax(t).done(n)};t.setOrderDetail=function(n){t.handleResponse(n,function(n){var t,r;i.orderId=n.data.id;n.data.moreInfo=JSON.parse(n.data.moreInfo);t=n.data;t.offsetableOrderItems=$.grep(t.orderItems,function(n){return n.price<0});t.chargeOrderItems=$.grep(t.orderItems,function(n){return n.price>0&&n.productTypeId===3});t.salaryOrderItems=$.grep(t.orderItems,function(n){return n.price>0&&n.productTypeId===31});r=e.render(n.data);u.append(r)})};t.redirectToPaymentGateway=function(n){t.handleResponse(n,function(n){o.empty();window.location.href=n.data.paymentURL})};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.setUserEvent=function(){u.on("click",".btn-pay",function(){t.generatePaymentLink(t.redirectToPaymentGateway)})};f=function(){t.loadOrderDetail(t.setOrderDetail);t.setUserEvent()};f()},pagePayConsultationFee=new PagePayConsultationFee({url:{getOrderDetail:"/api/pro/order/0",generatePaymentLink:"/api/pro/payment"}});