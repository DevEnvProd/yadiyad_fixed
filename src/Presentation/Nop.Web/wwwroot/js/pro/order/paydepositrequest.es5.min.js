"use strict";var PagePayDepositRequest=function(n){var t=this,u=n.url,r=n.model||{},f,i,e;r.selectedPaymentOptionId=null;f=$.templates("#tmpl-paydepositrequest");i=$(".content-payjobescrow");t.getParentPage=function(){var n=null;return typeof pageJobApplicant!="undefined"?n=pageJobApplicant:typeof pageServiceConfirms!="undefined"&&(n=pageServiceConfirms),n};t.generatePaymentLink=function(n){var t={url:u.generatePaymentLink,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({id:r.orderId})};$.ajax(t).done(n)};t.createOrder=function(n){var i=t.getParentPage(),r={depositRequestId:i.model.depositRequestId},f={url:u.createOrder,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(r)};$.ajax(f).done(n)};t.createOrderResponse=function(n){r.orderId=n.data.id;var t=f.render(n.data);i.append(t);app.initFormComponent(i)};t.redirectToPaymentGateway=function(n){t.handleResponse(n,function(n){window.location.href=n.data.paymentURL})};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.setUserEvent=function(){i.on("click",".btn-pay",function(){t.generatePaymentLink(t.redirectToPaymentGateway)})};e=function(){t.createOrder(t.createOrderResponse);t.setUserEvent()};e()},pagePayDepositRequest=new PagePayDepositRequest({url:{createOrder:"/api/pro/order/0",generatePaymentLink:"/api/pro/payment"}});