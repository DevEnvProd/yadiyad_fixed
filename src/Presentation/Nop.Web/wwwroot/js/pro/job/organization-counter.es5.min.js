"use strict";var ComponentOrganizationJobCounter=function(n,t){var i=this,u=t.url,r=t.model||{},s=(new Date).getTimezoneOffset()/-60,h=$(n),f=$(".job-profile-title"),e=$(".job-profile-info"),a=$(".section-expired-info"),c=$.templates("#tmpl-job-engagement-header"),l=$.templates("#tmpl-job-engagement-title"),o;i.setData=function(n){r=n.model||{};u=n.url;var i=window.location.href,t=i.split("/");r.jobId=parseInt(t[t.length-2])||0};i.loadOrganizationJobItemCounter=function(n){var t={background:!0,url:u.getOrganizationJobItemCounter.format(r),method:"GET",headers:{"Content-Type":"application/json"}};$.ajax(t).done(n)};i.getJobProfileInfo=function(n){var t={background:!0,url:u.getJobProfileInfo.format(r),method:"GET",headers:{"Content-Type":"application/json"}};$.ajax(t).done(n)};i.setOrganizationJobItemCounter=function(n){i.handleResponse(n,function(n){h.bindText(n.data)})};i.setJobProfileInfo=function(n){i.handleResponse(n,function(n){var t,i;n.data.status!==1&&(window.location.href="/pro/jobapplication/hired");n.data.viewJobCandidateFullProfileSubscriptionEndDate&&(n.data.viewJobCandidateFullProfileSubscriptionEndDateText=moment(n.data.viewJobCandidateFullProfileSubscriptionEndDate,"YYYY-MM-DD").add(s,"hour").format("DD MMM YYYY"));t=c.render(n.data);e.empty();e.append(t);i=l.render(n.data);f.empty();f.append(i)})};i.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};i.refresh=function(){i.loadOrganizationJobItemCounter(i.setOrganizationJobItemCounter)};o=function(){i.setData(t);i.loadOrganizationJobItemCounter(i.setOrganizationJobItemCounter);i.getJobProfileInfo(i.setJobProfileInfo)};o()},componentOrganizationJobCounter=new ComponentOrganizationJobCounter(".content-organization-job-counter",{url:{getOrganizationJobItemCounter:"/api/pro/job/{{jobId}}/org/counter",getJobProfileInfo:"/api/pro/job/{{jobId}}/info"}});