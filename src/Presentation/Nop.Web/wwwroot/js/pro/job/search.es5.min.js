"use strict";var PageJobSearch=function(n){var t=this,s=n.url,i=n.model||{},u=new SimplePagination(".simple-pagination"),o;i.search=null;i.jobSearchResultList=[];i.jobSeeker={isEntitledApplyJob:!1};var c=$(".content-job-search"),f=$(".card-job-search-result"),r=f.find(".list-job-search-result"),e=$.templates("#template-job-profile-simple"),h=$.templates("#template-job-profile-detail");t.setData=function(){};u.onPageChanged=function(n){t.submitJobSearchRequest(t.setJobSearchResultList,n)};t.submitJobSearchRequest=function(n,t){var r=10,e=t?t*r:0,u={filter:null,offset:e,recordSize:r,sorting:null,advancedFilter:{}},f;i.search=u;f={url:s.searchJob,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(u)};$.ajax(f).done(n)};t.setJobSearchResultList=function(n){t.handleResponse(n,function(n){u.set(n.data);f.bindText({totalCount:n.data.totalCount});r.empty();$.each(n.data.data,function(t,i){i.index=t+1+n.data.pageIndex*n.data.pageSize});var t=e.render(n.data.data);r.append(t);i.jobSearchResultList=i.jobSearchResultList.concat(n.data.data);i.jobSeeker.isEntitledApplyJob=n.data.additionalData.isEntitledApplyJob})};t.handleResponse=function(n,t){n&&n.status&&n.status.code===1?t(n):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};t.submitJobApplication=function(n){var t=$(n).closest(".card-job-profile-detail"),r=t.data("entity-id");i.selectedJobProfileId=r};t.changeJobProfileModel=function(n,t){var o=$(n).data("entity-id"),r=$.grep(i.jobSearchResultList,function(n){return n.id===o}),u,f;t===0&&(u=e.render(r),$(n).replaceWith(u));t===1&&($.each(r,function(n,t){t.isEntitledApplyJob=i.jobSeeker.isEntitledApplyJob}),f=h.render(r),$(n).replaceWith(f))};t.getModel=function(){return i};t.setUserEvent=function(){r.on("click",".card-job-profile-simple",function(n){$(n.target).hasClass("btn-apply-job")===!1&&$(n.target).hasClass("btn-subcribe-apply-job")===!1&&(r.find(".card-job-profile-detail").each(function(n){$(n.target).hasClass("btn-apply-job")===!1&&t.changeJobProfileModel(this,0)}),t.changeJobProfileModel(this,1))});r.on("click",".card-job-profile-detail",function(n){$(n.target).hasClass("btn-apply-job")===!1&&$(n.target).hasClass("btn-subcribe-apply-job")===!1&&t.changeJobProfileModel(this,0)});r.on("click",".btn-apply-job",function(){t.submitJobApplication(this)})};o=function(){t.setData(n);t.setUserEvent();t.submitJobSearchRequest(t.setJobSearchResultList)};o()},pageJobSearch=new PageJobSearch({url:{searchJob:"/api/pro/job/search"}});