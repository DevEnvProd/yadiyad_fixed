"use strict";var PageServiceList=function(n){var r=this,u=n.url,i=n.model||{},s;i.serviceList=[];var e=new SimplePagination(".pagination-service-list"),h=$.templates("#template-card-service-empty"),c=$.templates("#template-card-service-list"),l=$.templates("#template-card-service-list-empty"),o=$.templates("#template-card-service-list-response"),a=$.templates("#template-card-service-list-response-empty"),t=$(".content-service-search"),f=t.find(".list-service-list"),y=$(".content-service-list-response"),v=(new Date).getTimezoneOffset()/-60;e.onPageChanged=function(n){r.loadServiceListData(r.setServiceList,n)};r.loadServiceListData=function(n,t){var r={keyword:""},f=10,s=t?t*f:0,e={filter:r.keyword,offset:s,recordSize:f,sorting:null,advancedFilter:r},o;i.search=e;o={url:u.getServiceList,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};$.ajax(o).done(n)};r.submitServiceProfile=function(n){i.selectedServiceList.deleted=!0;var t={url:u.updateServiceProfile.format(i.selectedServiceList),method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(i.selectedServiceList)};$.ajax(t).done(n)};r.onSubmitServiceProfileResponse=function(n){n&&n.status&&n.status.code===1?swal({icon:"success",title:"Service Profile Deleted Successfully"}).then(function(){location.reload()}):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};r.setServiceList=function(n){var r,s,y;if(n&&n.status&&n.status.code===1)if(n.data.data.length>0){f.empty();e.set(n.data);$.each(n.data.data,function(n,t){t.tenureStart!==null&&(t.tenureStart=moment(t.tenureStart,"YYYY-MM-DDTHH:mm").add(0,"hour").format("DD MMM YYYY"));t.tenureEnd!==null&&(t.tenureEnd=moment(t.tenureEnd,"YYYY-MM-DDTHH:mm").add(0,"hour").format("DD MMM YYYY"));t.tenureStart!==null&&(t.startDate=moment(t.startDate,"YYYY-MM-DD").add(0,"hour").format("DD MMM YYYY"));t.createdOnUTC=moment(t.createdOnUTC,"YYYY-MM-DDTHH:mm").add(v,"hour").format("DD MMM YYYY")});t.bindText(n.data);r=c.render(n.data.data);f.append(r);i.serviceList=i.serviceList.concat(n.data.data);i.selectedServiceList=n.data.data[0];s=o.render(i.selectedServiceList);t.find(".content-service-list-response").replaceWith(s);t.find(".content-service-list-response").on("click",".btn-search",function(){location.href=u.searchJobPage.format(i.selectedServiceList)});y=$(".area-expertise");i.selectedServiceList.serviceExpertises.forEach(function(n){y.append("<span class='badge badge-pill badge-primary'>"+n.name+"<\/span>&nbsp;")});var nt=t.find(".form-group-onsite"),p=t.find(".form-group-charges"),w=t.find(".form-group-projectBased"),b=t.find(".form-group-consultation"),k=t.find(".form-group-freelancing"),d=t.find(".form-group-part-time"),g=i.selectedServiceList.serviceTypeId;p.addClass("hidden");w.addClass("hidden");b.addClass("hidden");k.addClass("hidden");d.addClass("hidden");switch(g){case 1:k.removeClass("hidden");break;case 2:d.removeClass("hidden");break;case 3:b.removeClass("hidden");break;case 4:w.removeClass("hidden")}g&&p.removeClass("hidden")}else t.replaceWith(h),f.append(l),t.find(".content-service-list-response").replaceWith(a);else swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};r.setServiceListResponse=function(n){var a=$(n).data("entity-id"),v=$.grep(i.serviceList,function(n){return n.id===a}),r,u;$(n).parent().children(".selected").removeClass("selected");$(n).addClass("selected");i.selectedServiceList=v[0];r=o.render(i.selectedServiceList);t.find(".content-service-list-response").replaceWith(r);u=$(".area-expertise");i.selectedServiceList.serviceExpertises.forEach(function(n){u.append("<span class='badge badge-pill badge-primary'>"+n.name+"<\/span>&nbsp;")});var y=t.find(".form-group-onsite"),f=t.find(".form-group-charges"),e=t.find(".form-group-projectBased"),s=t.find(".form-group-consultation"),h=t.find(".form-group-freelancing"),c=t.find(".form-group-part-time"),l=i.selectedServiceList.serviceTypeId;f.addClass("hidden");e.addClass("hidden");s.addClass("hidden");h.addClass("hidden");c.addClass("hidden");switch(l){case 1:h.removeClass("hidden");break;case 2:c.removeClass("hidden");break;case 3:s.removeClass("hidden");break;case 4:e.removeClass("hidden")}l&&f.removeClass("hidden")};r.setUserEvent=function(){f.on("click",".card-service-list",function(){r.setServiceListResponse(this);t.find(".content-service-list-response").on("click",".btn-search",function(){location.href=u.searchJobPage.format(i.selectedServiceList)})})};s=function(){r.loadServiceListData(r.setServiceList);r.setUserEvent()};s()},pageServiceList=new PageServiceList({url:{getServiceList:"/api/pro/service/user",searchJobPage:"/pro/job/{{id}}/search"}});