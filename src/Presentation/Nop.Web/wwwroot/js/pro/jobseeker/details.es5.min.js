"use strict";var PageJobSeekerProfileDetails=function(n,t){var r=this,u={data:{categories:[],licenseCertificates:[],academicQualifications:[],languageProficiencies:[],preferredLocations:[],cv:null},addCategory:function(){var n=$.extend(!0,{},{});n.uid=app.randomId;$.observable(this.data.categories).insert(n);app.initFormComponent(i)},removeCategory:function(n,t){$.observable(this.data.categories).remove(t)},addLicenseCertificates:function(){var n=$.extend(!0,{},{});n.uid=app.randomId;$.observable(this.data.licenseCertificates).insert(n);app.initFormComponent(i)},removeLicenseCertificates:function(n,t){$.observable(this.data.licenseCertificates).remove(t)},addAcademicQualifications:function(){var n=$.extend(!0,{},{});n.uid=app.randomId;$.observable(this.data.academicQualifications).insert(n);app.initFormComponent(i)},removeAcademicQualifications:function(n,t){$.observable(this.data.academicQualifications).remove(t)},addLanguageProficiencies:function(){var n=$.extend(!0,{},{});n.uid=app.randomId;$.observable(this.data.languageProficiencies).insert(n);app.initFormComponent(i)},removeLanguageProficiencies:function(n,t){$.observable(this.data.languageProficiencies).remove(t)},onIsPresentCompanyChanged:function(){var t=!this.data.isPresentCompany,n=i.find('[name="tenureEnd"]');t?(app.setFieldValue("tenureEnd",null),i.find("#tenureEnd-error").closest("div").hide(),n.removeClass("input-validation-error")):(i.find("#tenureEnd-error").closest("div").show(),n.addClass("input-validation-error"))},onIsFreelanceHourlyChanged:function(){var n=!this.data.isFreelanceHourly;n||$.observable(this.data).setProperty("hourlyPayAmount",null)},onIsFreelanceDailyChanged:function(){var n=!this.data.isFreelanceDaily;n||$.observable(this.data).setProperty("dailyPayAmount",null)},onJobModelChanged:function(){var r=this.data.isPartialOnSite||this.data.isOnSite,t,n;if(r)this.data.preferredLocations.length===0&&(t=$.extend(!0,{},this.defaultCountry),t.uid=app.randomId,$.observable(this.data.preferredLocations).insert(t),app.setFieldValue("preferredLocations[0].countryId",this.data),app.initFormComponent(i));else for(n=this.data.preferredLocations.length-1;n>=0;n--)$.observable(this.data.preferredLocations).remove(n)},onEmploymentStatusChanged:function(){app.setFieldValue("tenureStart",null);app.setFieldValue("tenureEnd",null);$.observable(this.data).setProperty("company",null);$.observable(this.data).setProperty("position",null);$.observable(this.data).setProperty("isPresentCompany",null);$.observable(this.data).setProperty("achievementAward",null)},getData:function(){var n=this.data;return n.tenureStart=app.getFormValue(i,"tenureStart"),n.tenureEnd=app.getFormValue(i,"tenureEnd"),n.licenseCertificates=app.getFormValue(i).licenseCertificates,n.cv=app.getFormValue(i,"cv.downloadId")?{downloadId:app.getFormValue(i,"cv.downloadId")}:{downloadId:0},n},setData:function(n){n=n||{id:0};n.id||(n.categories=n.categories&&n.categories.length>0?n.categories:[{uid:app.randomId}],n.academicQualifications=n.academicQualifications&&n.academicQualifications.length>0?n.academicQualifications:[{uid:app.randomId}],n.licenseCertificates=n.licenseCertificates&&n.licenseCertificates.length>0?n.licenseCertificates:[],n.languageProficiencies=n.languageProficiencies||[{uid:app.randomId}]);for(var t in n)$.observable(this.data).setProperty(t,n[t]);app.initFormComponent(i);console.log(n);app.setFormValue(i,n)}},f,e,i,o;Object.defineProperty(r,"model",{get:function(){return u}});f=t.url;$.templates({tmplJobSeekerProfile:"#tmpl-job-seeker-profile"});e=$(".content-jobseeker-profile");i=e.find("#form-jobseeker-profile");r.getJobSeekerProfileData=function(n){var t={url:f.getJobSeekerProfile,method:"get",headers:{"Content-Type":"application/json"}};$.ajax(t).done(n)};r.submitJobSeekerProfile=function(n){var r=$('[name="isOnSite"]').is(":checked"),e=$('[name="isPartialOnSite"]').is(":checked"),o=$('[name="isRemote"]').is(":checked"),s=$('[name="isFreelanceHourly"]').is(":checked"),h=$('[name="isFreelanceDaily"]').is(":checked"),c=$('[name="isProjectBased"]').is(":checked"),t,i;(r||e||o)&&(s||h||c)?(t=u.getData(),i={url:f.submitJobSeekerProfile,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)},$.ajax(i).done(n)):swal({icon:"warning",title:"Fail",text:"Please select job seeking availability"}).then(function(){})};r.getDefaultCountry=function(n){var t={url:f.getDefaultCountry,method:"get",headers:{"Content-Type":"application/json"}};$.ajax(t).done(n)};r.initDisplayComponent=function(){$.templates.tmplJobSeekerProfile.link(n,u)};r.setDefaultCountry=function(n){if(n&&n.status&&n.status.code===1){var t={countryId:n.data.id,countryName:n.data.name};$.observable(u).setProperty("defaultCountry",t)}};r.validationForm=function(){return i.valid()&&!0};r.setJobSeekerProfileData=function(n){n&&n.status&&n.status.code===1&&u.setData(n.data)};r.onSubmitJobSeekerProfileResponse=function(n){n&&n.status&&n.status.code===1?swal({icon:"success",title:u.id===0?"Job CV Created Successfully":"Job CV Updated Successfully"}).then(function(){location.href="/pro/jobseeker/"}):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};r.setUserEvent=function(){i.find(".btn-submit").on("click",function(n){n.preventDefault();n.stopPropagation();app.initFormComponent(i);r.validationForm()&&r.submitJobSeekerProfile(r.onSubmitJobSeekerProfileResponse)});i.find(".btn-cancel").on("click",function(n){n.preventDefault();n.stopPropagation();location.href="/pro/jobseeker/"})};o=function(){r.getDefaultCountry(r.setDefaultCountry);r.initDisplayComponent();r.getJobSeekerProfileData(r.setJobSeekerProfileData);r.setUserEvent()};o()},pageJobSeekerProfileDetails=new PageJobSeekerProfileDetails("#form-jobseeker-profile",{url:{getJobSeekerProfile:"/api/pro/jobseeker",submitJobSeekerProfile:"/api/pro/jobseeker",getDefaultCountry:"/api/pro/source/country/default"}});