"use strict";var PageServiceProfileDetails=function(n){var i=this,u=n.model,f=n.url,s=null,e=0,t=$(".content-service-profile"),r=t.find("#form-service-profile"),o=t.find(".form-group-onsite"),h=t.find(".form-group-onsite-charges"),it=t.find(".form-group-charges"),c=t.find(".form-group-projectBased"),l=t.find(".form-group-consultation"),a=t.find(".form-group-freelancing"),v=t.find(".form-group-part-time"),y=t.find(".form-group-employment"),rt=t.find(".area-agreement"),p=t.find(".form-group-agreement"),ut=t.find(".form-group-agreement").html(),ft=t.find(".btn-cancel"),et=t.find(".partial-header"),ot=t.find(".title-create"),st=t.find(".title-update"),ht=t.find(".btn-add-licenseCert"),w=t.find(".section-licenseCert"),ct=t.find(".btn-add-education"),b=t.find(".section-education"),lt=t.find(".btn-add-language"),k=t.find(".section-language"),at='<div class="col-12 form-group-agreement"><div class="form-group-test row"><div class="col-sm-12 text-center"><div class="radio d-inline-block mr-4"><label class="col-form-label form-check-label"><input type="checkbox" name="agreement" required><span>I acknowledge that I have read and agreed to be bound by the terms and conditions in the <a class="btn-link text-primary text-bold" target="_blank" href="/terms-of-service">"Terms of Service" <\/a> and <a class="btn-link text-primary text-bold" target="_blank" href="/consultation-guidelines-and-terms">"Consulting Guidelines and Terms" <\/a>.<\/span><\/label><\/div><\/div><\/div><\/div>',d='<div class="section-inner-licenseCert card card-body"><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Name<\/label><div class="col-sm-9"><input type="text" class="form-control" name="professionalAssociationName{{id}}" maxlength="200" required /><\/div><\/div><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Issuing Organization<\/label><div class="col-sm-9"><input type="text" class="form-control" name="licenseCertificateName{{id}}" maxlength="200" required /><\/div><\/div><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Document<\/label><div class="col-sm-9"><input name="licenseCertificateDocument{{id}}" class="form-control input-dropzone" type="hidden" data-name-origin="downloadId" data-name-temp="newDownloadId" required /><\/div><\/div><div class="row"><ul class="col-sm-6 text-muted" style="list-style-type: circle; padding-left:20px;"><i><li>If both fields are not applicable, click ‘Remove’<\/li><li>If one field is not applicable, enter ‘NA’<\/li> <\/i><\/ul><div class="col-sm-6 text-right"><button type="button" class="btn btn-default btn-remove-licenseCert" onclick="this.offsetParent.offsetParent.remove();"><i class="fa fa-trash" aria-hidden="true"><\/i>&nbsp;&nbsp; Remove<\/button><\/div><\/div><\/div>',g='<div class="section-inner-education card card-body"><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Qualification<\/label><div class="col-sm-9"><select class="form-control select2 select" required name="academicQualificationTypeId{{id}}" textName="academicQualificationTypeName{{id}}" placeholder="Qualification" data-sourceurl="/api/pro/source/academicQualificationType" data-id="value" data-text="text"><\/select><\/div><\/div><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Qualification Name<\/label><div class="col-sm-9"><input type="text" class="form-control" name="academicQualificationName{{id}}" maxlength="200" required /><\/div><\/div><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Institution (Optional)<\/label><div class="col-sm-9"><input type="text" class="form-control" maxlength="200" name="academicInstitution{{id}}" /><\/div><\/div><div class="form-group"><div class="float-right"><button type="button" class="btn btn-default btn-remove-education" onclick="this.offsetParent.remove();"><i class="fa fa-trash" aria-hidden="true"><\/i>&nbsp;&nbsp; Remove<\/button><\/div><\/div><\/div>',nt='<div class="section-inner-language card card-body"><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Language<\/label><div class="col-sm-9"><select class="form-control select2 select" required name="languageId{{id}}" textName="languageName{{id}}" uniquegroup="language" placeholder="Language" data-sourceurl="/api/pro/source/language" data-id="id" data-text="name"><\/select><\/div><\/div><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Proficiency (spoken)<\/label><div class="col-sm-9"><select class="form-control select2 select" required name="proficiencyLevel{{id}}" textName="proficiencyLevelName{{id}}" placeholder="Proficiency" data-sourceurl="/api/pro/source/LanguageProficiency" data-id="id" data-text="name"><\/select><\/div><\/div><div class="form-group row"><label for="" class="col-sm-3 col-form-label">Proficiency (written)<\/label><div class="col-sm-9"><select class="form-control select2 select" required name="proficiencyWrittenLevel{{id}}" textName="proficiencyWrittenLevelName{{id}}" placeholder="Proficiency" data-sourceurl="/api/pro/source/LanguageProficiency" data-id="id" data-text="name"><\/select><\/div><\/div><div class="form-group text-right"><ul class="col-sm-6 text-muted text-left" style="list-style-type: circle; padding-left:20px;"><i><li>If not applicable, click ‘Remove’<\/li><\/i><\/ul><div ><button type="button" class="btn btn-default btn-remove-language" onclick="this.offsetParent.remove();"><i class="fa fa-trash" aria-hidden="true"><\/i>&nbsp;&nbsp; Remove<\/button><\/div><\/div><\/div>',tt;i.setData=function(n){u=n.model||{};f=n.url;var i=window.location.pathname,t=i.split("/");u.id=parseInt(t[t.length-1])||0};i.getServiceProfileData=function(n){var t={url:f.getServiceProfile.format(u),method:"get",headers:{"Content-Type":"application/json"}};u.id!==0?$.ajax(t).done(n):n(null)};i.getDefaultCountry=function(n){var t={url:f.getDefaultCountry,method:"get",headers:{"Content-Type":"application/json"}};$.ajax(t).done(n)};i.setDefaultCountry=function(n){n&&n.status&&n.status.code===1&&(s={countryId:n.data.id,countryName:n.data.name},app.setFieldValue("countryId",s))};i.setServiceProfileData=function(n){var t,f,o,s,h;n&&n.status&&n.status.code===1&&(n.data.tenureEnd===null&&(n.data.isPresentCompany=!0),n.data.tenureEnd=moment(n.data.tenureEnd).format("YYYY/MM/DD"),n.data.tenureStart=moment(n.data.tenureStart).format("YYYY/MM/DD"),e=n.data.serviceModelId,app.setFormValue(r,n.data),r.addClass("mode-update"),r.find('[name="serviceTypeId"]:checked').trigger("change",!0),r.find('[name="serviceModelId"]:checked').trigger("change",!0),r.find('[name="employmentStatus"]:checked').trigger("change",!0),r.find('[name="isPresentCompany"]:checked').trigger("change",!0),r.find(".form-group-agreement").addClass("hidden"),n.data.serviceLicenseCertificates.forEach(function(n,t){var i=d.replaceAll("{{id}}",t);w.last().append(i)}),n.data.serviceAcademicQualifications.forEach(function(n,t){var i=g.replaceAll("{{id}}",t);b.last().append(i)}),n.data.serviceLanguageProficiencies.forEach(function(n,t){var i=nt.replaceAll("{{id}}",t);k.last().append(i)}),i.initFormSelect(),$(".section-inner-licenseCert").each(function(t){var h=n.data.serviceLicenseCertificates[t].professionalAssociationName,c=n.data.serviceLicenseCertificates[t].licenseCertificateName,i=n.data.serviceLicenseCertificates[t].downloadName,s=n.data.serviceLicenseCertificates[t].downloadId,l=n.data.serviceLicenseCertificates[t].downloadGuid,o;if($(this).find('[name^="professionalAssociationName"]').val(h),$(this).find('[name^="licenseCertificateName"]').val(c),s!==null){var r=$(this).find('[name^="licenseCertificateDocument"]').next(".dropzone"),a={name:i,size:12345},f=new Dropzone.forElement(r[0]),e=$(this).find('[name^="licenseCertificateDocument"]').data("name-origin");e&&(o=u[e],$(this).find('[name^="licenseCertificateDocument"]').data(e,o),i=i||o);f.removeAllFiles(!0);r.find(".dz-preview").remove();r.find(".dropzone").removeClass("dz-started");f.options.addedfile.call(f,a);$(this).find('[name^="licenseCertificateDocument"]').val(i);$(this).find('[name^="licenseCertificateDocument"]').data("downloadId",s);$(this).find(".dz-details").click(function(n){n.preventDefault();window.open("/api/pro/document?downloadGuid="+l,"_blank")})}}),$(".section-inner-education").each(function(t){var i=n.data.serviceAcademicQualifications[t].academicQualificationType,r=n.data.serviceAcademicQualifications[t].academicQualificationTypeName,u=n.data.serviceAcademicQualifications[t].academicQualificationName,f=n.data.serviceAcademicQualifications[t].academicInstitution,e=new Option(r,i,!0,!0);$(this).find('[name^="academicQualificationTypeId"]').append(e).trigger("change");$(this).find('[name^="academicQualificationName"]').val(u);$(this).find('[name^="academicInstitution"]').val(f)}),$(".section-inner-language").each(function(t){var i=n.data.serviceLanguageProficiencies[t].languageId,r=n.data.serviceLanguageProficiencies[t].languageName,u=n.data.serviceLanguageProficiencies[t].proficiencyLevel,f=n.data.serviceLanguageProficiencies[t].proficiencyLevelName,e=n.data.serviceLanguageProficiencies[t].proficiencyWrittenLevel,o=n.data.serviceLanguageProficiencies[t].proficiencyWrittenLevelName,s=new Option(r,i,!0,!0),h=new Option(f,u,!0,!0),c=new Option(o,e,!0,!0);$(this).find('[name^="languageId"]').append(s).trigger("change");$(this).find('[name^="proficiencyLevel"]').append(h).trigger("change");$(this).find('[name^="proficiencyWrittenLevel"]').append(c).trigger("change")}),t=$('select[name="cityId"]').select2("data"),t.length&&(t[0].code=n.data.cityId),f=$('select[name="stateProvinceId"]').select2("data"),f.length&&(f[0].code=n.data.stateProvinceId),o=$('select[name="countryId"]').select2("data"),o.length&&(o[0].code=n.data.countryId),s={stateProvinceId:n.data.stateProvinceId,stateProvinceName:n.data.stateProvinceName},h={cityId:n.data.cityId,cityName:n.data.cityName},app.setFieldValue("stateProvinceId",s),app.setFieldValue("cityId",h),$('select[name="categoryId"]').prop("disabled",!0),$('select[name="serviceExpertises"]').prop("disabled",!0))};i.submitServiceProfile=function(n){var t=app.getFormValue(r),i;t.serviceLicenseCertificates=[];$(".section-inner-licenseCert").each(function(){var n={},r,i;n.professionalAssociationName=$(this).find('[name^="professionalAssociationName"]').val();n.licenseCertificateName=$(this).find('[name^="licenseCertificateName"]').val();r=$(this).find('[name^="licenseCertificateDocument"]').data("downloadId");i=$(this).find('[name^="licenseCertificateDocument"]').data("newDownloadId");n.downloadId=i!==null&&i!==undefined?i:r;n.professionalAssociationName!==""&&n.licenseCertificateName!==""&&t.serviceLicenseCertificates.push(n)});t.serviceAcademicQualifications=[];$(".section-inner-education").each(function(){var n={};n.academicQualificationTypeId=$(this).find('[name^="academicQualificationTypeId"]').val();n.academicQualificationName=$(this).find('[name^="academicQualificationName"]').val();n.academicInstitution=$(this).find('[name^="academicInstitution"]').val();n.academicQualificationTypeId!==null&&n.academicQualificationName!==""&&n.academicInstitution!==""&&t.serviceAcademicQualifications.push(n)});t.serviceLanguageProficiencies=[];$(".section-inner-language").each(function(){var n={};n.languageId=$(this).find('[name^="languageId"]').val();n.proficiencyLevel=$(this).find('[name^="proficiencyLevel"]').val();n.proficiencyWrittenLevel=$(this).find('[name^="proficiencyWrittenLevel"]').val();n.languageId!==null&&n.proficiencyLevel!==null&&n.proficiencyWrittenLevel!==null&&t.serviceLanguageProficiencies.push(n)});t.employmentStatus!=1&&(t.tenureEnd=null,t.tenureStart=null);i={url:u.id?f.updateServiceProfile.format(u):f.createServiceProfile.format(u),method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};$.ajax(i).done(n)};i.validationForm=function(){return r.valid()&&!0};i.onSubmitServiceProfileResponse=function(n){n&&n.status&&n.status.code===1?swal({icon:"success",title:u.id===0?"Service Profile Created Successfully":"Service Profile Updated Successfully"}).then(function(){location.href="/pro/service/list/"}):swal({icon:"warning",title:"Fail",text:n.status.message}).then(function(){})};i.setUserEvent=function(){r.find(".btn-submit").on("click",function(n){n.preventDefault();n.stopPropagation();i.validationForm()&&i.submitServiceProfile(i.onSubmitServiceProfileResponse)});r.find(".btn-cancel").on("click",function(n){n.preventDefault();n.stopPropagation();location.href=f.serviceProfileList.format(u)});r.find('[name="serviceTypeId"]').on("change",function(n,i){var r=$(this).val(),u;c.addClass("hidden");l.addClass("hidden");a.addClass("hidden");v.addClass("hidden");i||(app.clearForm(c),app.clearForm(l),app.clearForm(a),app.clearForm(v));switch(r){case"1":a.removeClass("hidden");p.html(ut);o.addClass("hidden");$("[name='serviceModelId'][value='1']").parent().show();$("[name='serviceModelId'][value='2']").parent().show();$("[name='serviceModelId'][value='3']").parent().hide();$("[name='serviceModelId']").prop("checked",!1);$(".service-model-radio").addClass("mr-4");$(".service-model-radio").addClass("d-inline-block");i&&e!=0&&t.find('[name="serviceModelId"]').val([e]);break;case"2":v.removeClass("hidden");break;case"3":l.removeClass("hidden");$("[name='serviceModelId'][value='1']").parent().hide();$("[name='serviceModelId'][value='2']").parent().hide();$("[name='serviceModelId'][value='3']").parent().show();$("[name='serviceModelId']").prop("checked",!1);$(".service-model-radio").removeClass("mr-4");$(".service-model-radio").removeClass("d-inline-block");p.html(at);o.addClass("hidden");i&&e!=0&&t.find('[name="serviceModelId"]').val([e]);break;case"4":c.removeClass("hidden")}r&&r!=="4"&&it.removeClass("hidden");u=$('[name="serviceModelId"]:checked').val();h.addClass("hidden");r!=="4"&&(u==="1"||u==="2")&&h.removeClass("hidden")});$(document).on("change",'[name="serviceModelId"]',function(){var n=$(this).val(),t;o.addClass("hidden");switch(n){case"1":o.removeClass("hidden");app.setFieldValue("countryId",s);break;case"2":o.removeClass("hidden");app.setFieldValue("countryId",s)}t=$('[name="serviceTypeId"]:checked').val();h.addClass("hidden");n!=="3"&&t!=="4"&&h.removeClass("hidden")});r.find('[name="employmentStatus"]').on("change",function(n,t){var i=$(this).val();y.addClass("hidden");t||app.clearForm(y);switch(i){case"1":y.removeClass("hidden")}});r.find('[name="isPresentCompany"]').on("change",function(){var n=$(this).is(":checked"),i=$(r.find('[name="employmentStatus"]:checked')).val(),t=r.find('[name="tenureEnd"]');i!=1&&(n=!1);switch(n){case!1:$('[name="tenureEnd"]').prop("required",!0);$('[name="tenureEnd"]').removeAttr("hidden");r.find("#tenureEnd-error").closest("div").show();t.addClass("input-validation-error");break;case!0:$('[name="tenureEnd"]').val(null);$('[name="tenureEnd"]').removeAttr("required");$('[name="tenureEnd"]').attr("hidden",!0);r.find("#tenureEnd-error").closest("div").hide();t.removeClass("input-validation-error")}});ht.on("click",function(n){n.preventDefault();n.stopPropagation();var t=$(".section-inner-licenseCert").length,i=d.replaceAll("{{id}}",t);w.last().append(i);app.initFormComponent(r)});ct.on("click",function(n){n.preventDefault();n.stopPropagation();var t=$(".section-inner-education").length,r=g.replaceAll("{{id}}",t);b.last().append(r);i.initFormSelect()});lt.on("click",function(n){n.preventDefault();n.stopPropagation();var t=$(".section-inner-language").length,r=nt.replaceAll("{{id}}",t);k.last().append(r);i.initFormSelect()})};i.initFormSelect=function(){app.initFormComponent(r)};tt=function(){i.getDefaultCountry(i.setDefaultCountry);app.initFormComponent(r);i.setData(n);u.id!==0?(rt.addClass("hidden"),ot.addClass("hidden"),et.addClass("hidden")):(ft.addClass("hidden"),st.addClass("hidden"));u.id&&i.getServiceProfileData(i.setServiceProfileData);i.setUserEvent()};tt()},pageServiceProfileDetails=new PageServiceProfileDetails({url:{getServiceProfile:"/api/pro/service/{{id}}",updateServiceProfile:"/api/pro/service/{{id}}",createServiceProfile:"/api/pro/service",serviceProfileList:"/pro/service/list",getDefaultCountry:"/api/pro/source/country/default"}});